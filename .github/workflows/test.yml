name: Project Quality Check

on: [push, pull_request]

jobs:
  run-tests:
    runs-on: ubuntu-latest
    steps:
      - name: Download Code
        uses: actions/checkout@v4

      - name: Setup Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.10'

      - name: Install Dependencies
        run: |
          python -m pip install --upgrade pip
          # 1. Install the requirements first
          pip install -r requirements.txt
          # 2. Install the project in 'editable' mode (-e)
          # This links the code directly to the environment
          pip install -e .
          # Final force-check to ensure rich is the right version
          python -m pip install "rich>=13.7.0"

      - name: Run Logic Tests
        # We use 'python -m pytest' to ensure it uses the local version of the tool
        run: python -m pytest tests/
